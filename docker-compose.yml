version: '3'
services:
    api:
        build: .
        environment: 
            - PYTHONUNBUFFERED=1
            - CLIENT_ID=d85f7cf27fea462498777339f76c038b
            - CLIENT_SECRET=069aaa68855142a3838cf7b333cabcd9
        ports:
            - 5000:5000
        depends_on:
            - db
    db:
        image: mysql:latest
        restart: always
        environment:
            MYSQL_ROOT_PASSWORD: password
        ports:
            - '3306:3306'
        expose:
            - '3306'
        volumes:
            - ./sql/up.sql:/docker-entrypoint-initdb.d/1.up.sql
    admin:
        image: phpmyadmin/phpmyadmin
        links: 
            - db:mysql
        environment:
            MYSQL_USERNAME: root
            MYSQL_ROOT_PASSWORD: password
        restart: always
        ports:
            - 8080:80